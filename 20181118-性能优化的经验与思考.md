# 性能优化的经验与思考

## 性能问题出在哪里
- 数据量大
- 算法复杂度高
- IO高

## 如何定位
### 分而治之，缩小范围
这种方法，是最直接而且最有效的。
程序的执行，依赖模块间的调用。
在模块间加入一些协助代码，记录每个模块的执行时间、执行次数等。
一步步缩小代码范围，直至定位出具体原因。

### 进阶方法
先对性能问题进行几点思考，初步判断一下，是CPU高，还是IO高。
然后分析下，程序处理了哪些相应的操作。
毕竟，引起性能问题的只是其中的一部分。
当然，这需要对程序代码非常熟悉，而且具有相应的经验。

## 经验之谈
- 使用批量接口代替
```
例1：频繁调用addNode(node)方法，可以使用addNodes(nodes)替代。
例2：频繁的查数据库。可以先批量查出数据，再进行处理。
```

- 空间换时间
```
例1：频繁通过同样的属性遍历大列表。
可以使用Map进行缓存数据，降低时间复杂度。
遍历列表时间复杂度为O(n)，而Map获取数据时间复杂度为O(1)。
```
